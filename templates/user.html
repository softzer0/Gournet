{% extends 'base/view.html' %}

{% block title %}{{ user.first_name }} {{ user.last_name }} - Gournet{% endblock %}
{% block head %}{{ block.super }}
    {% load staticfiles %}<script src="{% static 'main/js/custom/user.js' %}"></script>{% endblock %}

{% block bodyatt %}{{ block.super }} ng-init="id = {{ user.pk }}; first_name = '{{ user.first_name }}'; rel_state = {{ rel_state }}"{% endblock %}

{% block rowatt %}ng-controller="UserCtrl" ng-init="friends_count = {{ friends_count }}"{% endblock %}

{% block name %}{{ user.first_name }} {{ user.last_name }}{% endblock %}

{% block img %}{{ user.username }}/avatar/{% endblock %}

{% block other %}<li><a href="https://maps.google.com/maps?q={{ user.get_location_display }}"><i class="fa fa-map-marker"></i> {{ user.get_location_display }}</a></li>
                        <li
                            ><a href="javascript:" ng-click="showFriendsModal()" ng-if="friends_count > 0"><i class="fa fa-users"></i> <strong>{% verbatim %}{{ friends_count }}{% endverbatim %}</strong></a
                            ><i class="fa fa-users" ng-if="friends_count == 0"></i>
                            <span ng-switch="friends_count"
                                ><span ng-switch-default>osobe su {% if rel_state > -1 %}mu{% else %}ti{% endif %} prijatelji</span
                                ><span ng-switch-when="1">osoba {% if rel_state > -1 %}mu{% else %}ti{% endif %} je prijatelj</span
                                ><span ng-switch-when="0">{% if rel_state > -1 %}Nema{% else %}Nemaš{% endif %} prijatelja</span
                            ></span>
                        </li>
                        {% if rel_state > -1 %}<li
                            ><a href="javascript:" ng-dialog-message="{% verbatim %}{{ rel_state_msg }}{% endverbatim %}" ng-dialog-click="doFriendRequestAction()"
                                ><i class="fa" ng-class="rel_state == 0 || rel_state == 2 ? 'fa-user-plus' : 'fa-user-times'"></i>
                                <span ng-switch="rel_state"
                                    ><span ng-switch-when="0">{% verbatim %}{{ friends_count > 0 ? "I meni je prijatelj" : "Moj je prijatelj" }}{% endverbatim %}</span
                                    ><span ng-switch-when="1">Otkaži zahtev za prijateljstvo</span
                                    ><span ng-switch-when="2">Prihvati zahtev za prijateljstvo</span
                                    ><span ng-switch-when="3">Nije mi više prijatelj</span
                                ></span>
                            </a>
                        </li>{% endif %}{% endblock %}

{% block content %}<uib-tab ng-repeat="tab in tabs" index="$index" heading="{% verbatim %}{{ tab.name.charAt(0).toUpperCase() + tab.name.slice(1) }}{% endverbatim %}">
						<div class="mn1" ng-init="t = tab.name.slice(0, -1)" ng-if="objloaded[$index] || active == $index" ng-include="'/static/main/events.html'"></div>
                    </uib-tab>{% endblock %}